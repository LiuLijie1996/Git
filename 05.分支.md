### 分支的好处

+ 举一个例子现在公司要求写一个项目,预计要求大约1个月完成,但是你第一周就完成了70%，接下来突然接收到调令需要临时出差,你只能在酒店或是高铁上断断絮絮的写，这时候为了防止代码丢失，必须要提交到git上去，但你写了一半的代码是没法运行的，开发其他模块的同事一旦同步了你的代码，那就是满屏幕的错误了
+ 所以这时候,我们就需要一个临时单独空间，可以让我们存储个人的代码，别人看不到也无法同步你的临时代码，等到项目完成了再一次性提交上去，这个临时空间就是分支

------



### 分支指令

```
git branch 分支名
	创建一个分支
	
git branch
	查看一共有多少个分支，*号指向的分支，就是当前所在的分支
	
git checkout 分支名
	切换到某个分支上
	
git checkout -b 分支名
	创建分支并切换到该分支上
	
git merge 分支名
	合并分支，但不能添加说明，合并前必须先切换到主分支上然后再和该分支合并
	
git merge --no-ff -m "合并说明" 分支名
	合并分支，并给此次合并添加说明，合并前必须先切换到主分支上然后再和该分支合并
	
git branch -d 分支名
	删除分支，删除分支时，必须保证自己不在这个分支上才能删除成功
	
git branch -D 分支名
	强制删除分支
	
git log --graph
	图形化日志
```

------



### bug分支

+ 软件开发中, bug就像家常便饭一样，有了bug就需要修复，在Git中，由于分支是如此的强大，所以，每个bug都可以通过一个新的临时分支来修复，修复后，合并分支，然后将临时分支删除

```
git stash
	暂存当前分支状态，并不是真正的进了暂存区
	
git stash list
	查看状态列表

git stash apply
	恢复状态
```

+ 步骤1：将新增的代码先复制一份，然后 `git stash` 暂存
+ 步骤2：新建 `issue-001` 分支并进入
+ 步骤3：粘贴之前复制的代码，并修改
+ 步骤4：提交并说明这是个bug分支
+ 步骤5：回到上一层分支上进行合并代码 `git merge --no-ff -m '合并bug分支' issue-001`
+ 步骤6：恢复状态 `git stash apply` 恢复状态时vscode会提示保留哪一个（肯定保留修改好的）
+ 步骤7：再次进行恢复状态 `git stash apply`
+ 步骤8：提交并说明bug已修复

------



### feature分支

+ 软件开发中,总有无穷无尽的新的功能要不断添加进来。添加一个新功能时,你肯定不希望因为一些实验性质的代码,把主分支搞乱了,所以,每添加一个新功能,最好新建一个feature分支,在上面开发,完成后,合并,最后,删除该feature分支。

+ 比如我们现在决定要给当前项目加一个新功能,就叫做Gundam

1. 开发准备
   新建分支并进入

   ```
   git branch Gundam
   git checkout Gundam
   ```

2. 新功能开发完成后提交分支

   ```
   git add new.js
   git commit -m "开发了新功能，增加新的new.js"
   ```

3. 切换回dev进行合并

   ```
   git checkout dev
   git merge --no-ff -m '合并新功能分支' Gundam
   ```

4. 但是此时产品经理说新功能不加了

   ```
   git branch -d Gundam
   	销毁分支
   ```

**如果我们要在未合并之前就删除掉,那么此时我们就需要用大写的-D参数**