### 多人协作编程

+ 当你从远程仓库克隆时，实际上Git自动把本地的 master 分支和远程的 master 分支对应起来了，并且，远程仓库的默认名称是 origin 。
+ 要查看远程库的信息，用 git remote，或者用 git remote -v 显示更详细的信息

------



### 推送分支

+ 推送分支,就是把该分支上的所有本地提交推送到远程库。推送时,要指定本地分支,这样, Git就会把该分支推送到远程库对应的远程分支上:

```
git push origin master
	把本地的master分支，推送到远程的master分支上
	
git push origin dev
	把本地的dev分支，推送到远程的dev分支上
```

+ 但是,并不是一定要把本地分支往远程推送,那么,哪些分支需要推送,哪些不需要呢?
  + `master`是主分支，因此要时刻与远程同步;
  + `dev`是开发分支，团队所有成员都需要在上面工作,所以也需要与远程同步;
  + `bug`分支只用于在本地修复bug,就没必要推到远程了,除非老板要看看你每周到底修复了几个bug；
  + `feature` 分支是否推到远程,取决于你是否和你的小伙伴合作在上面开发。

------



### 抓取分支

+ 多人协作时，大家都会往 master 和 dev 分支上推送各自的修改。

+ 现在，模拟一个你的小伙伴，可以在另一台电脑（注意要把SSH Key添加到GitHub）或者同一台电

  脑的另一个目录下克隆

+ 当你的小伙伴从远程库clone时，默认情况下，你的小伙伴只能看到本地的 master 分支

+ 现在，你的小伙伴要在 dev 分支上开发，就必须创建远程 origin 的 dev 分支到本地，于是他用这

  个命令创建本地 dev 分支：(记得先在另一个本地库里面把dev提交上去先)

  

  **现在两个人就都可以在dev分支就行开发, 但是如果两个人写的不一样呢？**

  + 第一个提交的就没啥问题了, 但是第二个提交的就有问题了, 这时git系统就提示我们, 我们需要先把另一个用户提交的数据pull到本地进行合并之后, 再来提交，有多种方法

  ```
  git pull origin "分支名"
  	此时会从远程库里面抓取 符合"分支名"的库, 并且与本地合并再提交
  	
  git branch --set-upstream-to=origin/remote_branch  your_branch
  	origin/remote_branch是远程分支；your_branch是你当前的本地分支。
  ```

  

因此，多人协作的工作模式通常是这样：

1. 首先，可以试图用推送自己的修改；

2. 如果推送失败，则因为远程分支比你的本地先更新，需要先将自己的代码进行缓存(git stash)或提交，然后用 git pull 拉取远程代码；

3. 使用 git stash apply 进行恢复缓存，此时必定有冲突，解决冲突，并在本地提交；

4. 没有冲突或者解决掉冲突后，再用 git push origin <branch-name> 推送就能成功！

如果 git pull 提示 no tracking information ，则说明本地分支和远程分支的链接关系没有创

建，用命令 git branch --set-upstream-to=<branch-name> origin/<branch-name> 。

这就是多人协作的工作模式，一旦熟悉了，就非常简单。

------



### 注意事项

+ 查看远程库信息，使用 git remote -v ； 
+ 本地新建的分支如果不推送到远程，对其他人就是不可见的；
+ 从本地推送分支，如果推送失败，先用 git pull 抓取远程的新提交；
+ 在本地创建和远程分支对应的分支，本地和远程分支的名称最好一致；( 或是直接 )
+ 建立本地分支和远程分支的关联，使用`git branch --set-upstream="远程分支名" "本地分支名" ;
+ 从远程抓取分支，使用 git pull ，如果有冲突，要先处理冲突。